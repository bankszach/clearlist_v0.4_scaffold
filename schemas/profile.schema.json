{
  "$schema":"https://json-schema.org/draft/2020-12/schema",
  "title":"Profile Capsule v1",
  "type":"object",
  "additionalProperties":false,
  "required":[
    "id",
    "version",
    "status",
    "canonical_name",
    "life",
    "affiliations",
    "thesis",
    "keywords",
    "claims",
    "practice",
    "provenance",
    "license",
    "seo"
  ],
  "properties":{
    "id":{
      "type":"string",
      "pattern":"^[a-z0-9-]+$"
    },
    "version":{
      "type":"string"
    },
    "status":{
      "type":"string",
      "enum":[
        "draft",
        "reviewed",
        "verified"
      ]
    },
    "canonical_name":{
      "type":"string"
    },
    "alt_names":{
      "type":"array",
      "items":{
        "type":"string"
      }
    },
    "pronunciation":{
      "type":"string"
    },
    "external_titles":{
      "type":"array",
      "items":{
        "type":"string"
      }
    },
    "life":{
      "type":"object",
      "required":[
        "born"
      ],
      "additionalProperties":false,
      "properties":{
        "born":{
          "type":"object",
          "required":[
            "date"
          ],
          "additionalProperties":false,
          "properties":{
            "date":{
              "type":"string",
              "format":"date"
            },
            "place":{
              "type":"string"
            }
          }
        },
        "died":{
          "type":"object",
          "additionalProperties":false,
          "properties":{
            "date":{
              "type":"string",
              "format":"date"
            },
            "place":{
              "type":"string"
            }
          }
        }
      }
    },
    "affiliations":{
      "type":"object",
      "additionalProperties":false,
      "properties":{
        "traditions":{
          "type":"array",
          "items":{
            "type":"string"
          }
        },
        "schools":{
          "type":"array",
          "items":{
            "type":"string"
          }
        },
        "orders":{
          "type":"array",
          "items":{
            "type":"string"
          }
        }
      }
    },
    "thesis":{
      "type":"string"
    },
    "keywords":{
      "type":"array",
      "items":{
        "type":"string"
      }
    },
    "claims":{
      "type":"array",
      "items":{
        "type":"object",
        "additionalProperties":false,
        "required":[
          "text",
          "evidence"
        ],
        "properties":{
          "text":{
            "type":"string"
          },
          "evidence":{
            "type":"array",
            "items":{
              "type":"string"
            }
          },
          "notes":{
            "type":"string"
          }
        }
      }
    },
    "practice":{
      "type":"array",
      "items":{
        "type":"object",
        "additionalProperties":false,
        "required":[
          "name",
          "steps"
        ],
        "properties":{
          "name":{
            "type":"string"
          },
          "steps":{
            "type":"array",
            "items":{
              "type":"string"
            }
          }
        }
      }
    },
    "sayings":{
      "type":"array",
      "items":{
        "type":"object",
        "additionalProperties":false,
        "required":[
          "text"
        ],
        "properties":{
          "text":{
            "type":"string"
          },
          "source":{
            "type":"string"
          },
          "verified":{
            "type":"boolean"
          },
          "license":{
            "type":"string"
          }
        }
      }
    },
    "care_notes":{
      "type":"array",
      "items":{
        "type":"string"
      }
    },
    "geo":{
      "type":"array",
      "items":{
        "type":"object",
        "additionalProperties":false,
        "required":[
          "place"
        ],
        "properties":{
          "place":{
            "type":"string"
          },
          "lat":{
            "type":"number"
          },
          "lng":{
            "type":"number"
          }
        }
      }
    },
    "media":{
      "type":"object",
      "additionalProperties":false,
      "properties":{
        "images":{
          "type":"array"
        },
        "audio":{
          "type":"array"
        },
        "video":{
          "type":"array"
        }
      }
    },
    "provenance":{
      "type":"object",
      "additionalProperties":false,
      "required":[
        "sources",
        "last_reviewed"
      ],
      "properties":{
        "sources":{
          "type":"array",
          "items":{
            "type":"object",
            "additionalProperties":false,
            "required":[
              "id",
              "title",
              "reliability"
            ],
            "properties":{
              "id":{
                "type":"string"
              },
              "title":{
                "type":"string"
              },
              "url":{
                "type":"string"
              },
              "reliability":{
                "type":"number",
                "minimum":0,
                "maximum":1
              },
              "notes":{
                "type":"string"
              }
            }
          }
        },
        "external_ids":{
          "type":"object",
          "additionalProperties":{
            "type":"string"
          }
        },
        "last_reviewed":{
          "type":"string",
          "format":"date"
        },
        "reviewer":{
          "type":"string"
        }
      }
    },
    "license":{
      "type":"object",
      "additionalProperties":false,
      "required":[
        "text"
      ],
      "properties":{
        "text":{
          "type":"string"
        },
        "media_notes":{
          "type":"string"
        }
      }
    },
    "ai":{
      "type":"object",
      "additionalProperties":false,
      "properties":{
        "synopsis":{
          "type":"string"
        },
        "qa_pairs":{
          "type":"array",
          "items":{
            "type":"object",
            "additionalProperties":false,
            "required":[
              "q",
              "a"
            ],
            "properties":{
              "q":{
                "type":"string"
              },
              "a":{
                "type":"string"
              }
            }
          }
        }
      }
    },
    "seo":{
      "type":"object",
      "additionalProperties":false,
      "required":[
        "slug",
        "summary"
      ],
      "properties":{
        "slug":{
          "type":"string"
        },
        "summary":{
          "type":"string"
        }
      }
    }
  }
}